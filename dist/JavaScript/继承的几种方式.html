<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js 实现继承的几种方式 | knowledge</title>
    <meta name="generator" content="VuePress 1.5.2">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?21b6775b18360c4e8a93122bc08e4af4";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
      </script>
    <link rel="icon" href="/front-end-knowledge/favicon.ico">
    <meta name="description" content="Let's learn together">
    <link rel="preload" href="/front-end-knowledge/assets/css/0.styles.b1cb1138.css" as="style"><link rel="preload" href="/front-end-knowledge/assets/js/app.8a3ea995.js" as="script"><link rel="preload" href="/front-end-knowledge/assets/js/2.73099b0e.js" as="script"><link rel="preload" href="/front-end-knowledge/assets/js/29.0ed6d585.js" as="script"><link rel="prefetch" href="/front-end-knowledge/assets/js/10.f693366a.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/11.24aea652.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/12.2dd93e43.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/13.92060b4a.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/14.19ce78e1.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/15.8e86d8c3.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/16.d3dfdbfb.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/17.44bc6a33.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/18.fa61d6fd.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/19.b2d2b79a.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/20.ec51357c.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/21.032e2414.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/22.18d0fa97.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/23.38073e12.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/24.eb51d9b3.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/25.e78b23f6.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/26.edfa6c43.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/27.032b18b3.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/28.2187f096.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/3.83b51ec1.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/30.ab48ca65.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/31.39ad2af8.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/32.32ca3b22.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/33.2ff22ec2.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/34.2f2c683c.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/35.45c6bb85.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/36.1c6d6205.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/37.8a86492b.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/38.03b6cc25.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/39.0db147e9.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/4.f4f3d28c.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/40.efd8c868.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/41.76d80b9e.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/42.99d9b15d.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/43.605501dd.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/44.c8c3891c.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/45.b2f30ec2.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/46.a74908c1.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/47.fdf4f901.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/48.4b4eb242.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/49.d83d6ed3.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/5.b31057b0.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/50.fb9bb4c3.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/51.603f170b.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/52.a2197faf.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/53.52eaa221.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/54.41cd6e4b.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/55.5444397b.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/56.7c53824b.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/57.15bf2333.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/6.56f7929a.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/7.a50a9f0e.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/8.d70b3a01.js"><link rel="prefetch" href="/front-end-knowledge/assets/js/9.defa4e77.js">
    <link rel="stylesheet" href="/front-end-knowledge/assets/css/0.styles.b1cb1138.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/front-end-knowledge/" class="home-link router-link-active"><!----> <span class="site-name">knowledge</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end-knowledge/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://blog.csdn.net/Jioho_chen" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitee.com/Jioho/front-end-knowledge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Jioho/front-end-knowledge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end-knowledge/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://blog.csdn.net/Jioho_chen" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitee.com/Jioho/front-end-knowledge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Jioho/front-end-knowledge" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java Script</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front-end-knowledge/JavaScript/创建对象的几种方式.html" class="sidebar-link">创建对象的几种方式</a></li><li><a href="/front-end-knowledge/JavaScript/JS事件循环机制宏任务微任务.html" class="sidebar-link">JS 事件循环机制(event loop)之宏任务/微任务</a></li><li><a href="/front-end-knowledge/JavaScript/原型和原型链.html" class="sidebar-link">原型和原型链-基础,但是非常重要</a></li><li><a href="/front-end-knowledge/JavaScript/apply-bind-call的区别.html" class="sidebar-link">apply，call，bind 区别</a></li><li><a href="/front-end-knowledge/JavaScript/JS的数据类型.html" class="sidebar-link">数据类型有几种类型,他们之前的区别</a></li><li><a href="/front-end-knowledge/JavaScript/如何检查对象中是否存在某个属性.html" class="sidebar-link">如何检查对象中是否存在某个属性</a></li><li><a href="/front-end-knowledge/JavaScript/js中函数执行过程.html" class="sidebar-link">js 中函数执行过程</a></li><li><a href="/front-end-knowledge/JavaScript/class与原型和原型链.html" class="sidebar-link">class 与原型和原型链</a></li><li><a href="/front-end-knowledge/JavaScript/common.js和es中模块引入的区别.html" class="sidebar-link">common.js 和 es6 中模块引入的区别？</a></li><li><a href="/front-end-knowledge/JavaScript/数组shift.call-arguments详解.html" class="sidebar-link">[].shift.call(arguments) 详解</a></li><li><a href="/front-end-knowledge/JavaScript/typeof和instanceof.html" class="sidebar-link">判断数据类型 typeof 和 instanceof</a></li><li><a href="/front-end-knowledge/JavaScript/letvarconst区别.html" class="sidebar-link">let var const 区别</a></li><li><a href="/front-end-knowledge/JavaScript/new一个对象的时候发生了什么.html" class="sidebar-link">new 一个对象的过程中发生了什么?</a></li><li><a href="/front-end-knowledge/JavaScript/nullundefined的区别.html" class="sidebar-link">null，undefined 的区别</a></li><li><a href="/front-end-knowledge/JavaScript/立即执行函数.html" class="sidebar-link">立即执行函数</a></li><li><a href="/front-end-knowledge/JavaScript/内置对象和普通对象.html" class="sidebar-link">内置对象有哪些?内置对象(函数对象)和普通对象区别</a></li><li><a href="/front-end-knowledge/JavaScript/事件冒泡捕获委托.html" class="sidebar-link">事件冒泡，事件捕获，事件委托</a></li><li><a href="/front-end-knowledge/JavaScript/什么是IIFE它的用途是什么.html" class="sidebar-link">什么是 IIFE 它的用途是什么</a></li><li><a href="/front-end-knowledge/JavaScript/了解v引擎吗一段js代码如何执行的.html" class="sidebar-link">了解 v8 引擎吗，一段 js 代码如何执行的</a></li><li><a href="/front-end-knowledge/JavaScript/描述一下this.html" class="sidebar-link">描述一下 this</a></li><li><a href="/front-end-knowledge/JavaScript/数组用法总结.html" class="sidebar-link">数组用法总结</a></li><li><a href="/front-end-knowledge/JavaScript/深拷贝浅拷贝.html" class="sidebar-link">深拷贝、浅拷贝</a></li><li><a href="/front-end-knowledge/JavaScript/箭头函数的特点.html" class="sidebar-link">箭头函数</a></li><li><a href="/front-end-knowledge/JavaScript/继承的几种方式.html" aria-current="page" class="active sidebar-link">js 实现继承的几种方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#类式继承" class="sidebar-link">类式继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#为什么-b-prototype-new-a-就可以实现继承？" class="sidebar-link">为什么 B.prototype = new A() 就可以实现继承？</a></li><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#类的继承的缺点" class="sidebar-link">类的继承的缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#构造函数继承" class="sidebar-link">构造函数继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#在-dog-中的-animal-call作用是什么？" class="sidebar-link">在 Dog 中的 Animal.call作用是什么？</a></li><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#构造函数继承的缺点" class="sidebar-link">构造函数继承的缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#组合继承" class="sidebar-link">组合继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#组合继承-优缺点" class="sidebar-link">组合继承 优缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#寄生组合式继承" class="sidebar-link">寄生组合式继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#为什么要-dog-prototype-constructor-dog？" class="sidebar-link">为什么要 Dog.prototype.constructor = Dog？</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#extends-继承" class="sidebar-link">extends 继承</a></li><li class="sidebar-sub-header"><a href="/front-end-knowledge/JavaScript/继承的几种方式.html#最后总结一下" class="sidebar-link">最后总结一下</a></li></ul></li><li><a href="/front-end-knowledge/JavaScript/说出==和===区别.html" class="sidebar-link">说出 == 和 ===区别，什么情况用 ==</a></li><li><a href="/front-end-knowledge/JavaScript/谈一下JS的类型转换.html" class="sidebar-link">谈一下 JS 的类型转换</a></li><li><a href="/front-end-knowledge/JavaScript/闭包.html" class="sidebar-link">闭包 进阶必问！</a></li><li><a href="/front-end-knowledge/JavaScript/防抖和节流.html" class="sidebar-link">防抖(debounce)和节流(throttle)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Html相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js-实现继承的几种方式"><a href="#js-实现继承的几种方式" class="header-anchor">#</a> js 实现继承的几种方式</h1> <p>讲继承之前，还是要搞懂 <a href="/front-end-knowledge/Javascript/原型和原型链.html">原型和原型链</a>
理解一下 new 的原理：<a href="/front-end-knowledge/Javascript/new一个对象的时候发生了什么.html">new 一个对象的时候发生了什么</a></p> <p>原型链图镇楼，也方便后面理解
<img src="https://gitee.com/Jioho/img/raw/master/knowledge/20200614181608.png" alt=""></p> <p><strong>实现继承的几种方式：</strong></p> <p></p><div class="table-of-contents"><ul><li><a href="#类式继承">类式继承</a><ul><li><a href="#为什么-b-prototype-new-a-就可以实现继承？">为什么 B.prototype = new A() 就可以实现继承？</a></li><li><a href="#类的继承的缺点">类的继承的缺点</a></li></ul></li><li><a href="#构造函数继承">构造函数继承</a><ul><li><a href="#在-dog-中的-animal-call-作用是什么？">在 Dog 中的 Animal.call作用是什么？</a></li><li><a href="#构造函数继承的缺点">构造函数继承的缺点</a></li></ul></li><li><a href="#组合继承">组合继承</a><ul><li><a href="#组合继承-优缺点">组合继承 优缺点</a></li></ul></li><li><a href="#寄生组合式继承">寄生组合式继承</a><ul><li><a href="#为什么要-dog-prototype-constructor-dog-？">为什么要 Dog.prototype.constructor = Dog？</a></li></ul></li><li><a href="#extends-继承">extends 继承</a></li><li><a href="#最后总结一下">最后总结一下</a></li></ul></div><p></p> <h2 id="类式继承"><a href="#类式继承" class="header-anchor">#</a> 类式继承</h2> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color
  <span class="token keyword">this</span><span class="token punctuation">.</span>home <span class="token operator">=</span> <span class="token string">'宠物店'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>skill <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'running'</span><span class="token punctuation">,</span> <span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token string">'sleep'</span><span class="token punctuation">]</span> <span class="token comment">// 留意这一行，后续会说</span>
<span class="token punctuation">}</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' is running'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span> <span class="token comment">// 留意*2 后面会说</span>
<span class="token keyword">var</span> wancai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">)</span>
wancai<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 旺财 is running</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="为什么-b-prototype-new-a-就可以实现继承？"><a href="#为什么-b-prototype-new-a-就可以实现继承？" class="header-anchor">#</a> 为什么 B.prototype = new A() 就可以实现继承？</h3> <p>结合上面的代码和根据原型链查找的规则。我们的 <code>wancai</code> 对象如果希望继承到 <code>Animal</code>。那就必须原型链查找的时候可以找到<code>Animal</code><br> <code>wancai</code> 的原型链：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>wancai<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token comment">// true 这是最基础的原型链</span>
<span class="token comment">// 根据原型链查找规则 得出 👇</span>
wancai<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果需要从<code>Animal</code>继承，那就是 <code>Dog.prototype.__proto__</code> 需要指向 <code>Animal.prototype</code>
如何找到 <code>Animal.prototype</code> ?</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br></div><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>

<span class="token comment">// 于是</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 可以得出</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
<span class="token comment">// Dog.prototype === wancat.__proto__</span>
wancat<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这样推导，是不是结合起来就可以得出：<code>wancai.__proto__.proto__ === Animal.prototype</code><br>
原型链已经形成，自然 <code>wancai</code> 就可以继承 <code>Animal</code> 的属性和方法，那继承就已经初步实现了~</p> <h3 id="类的继承的缺点"><a href="#类的继承的缺点" class="header-anchor">#</a> 类的继承的缺点</h3> <p><strong>1. 第一个是引用缺陷</strong></p> <blockquote><p>首先得知道哪些是引用类型 <a href="/front-end-knowledge/JavaScript/JS的数据类型.html#引用数据类型">引用数据类型</a><br>
Array 就是一个引用数据类型、包括我们常用的 Object 也是引用类型</p></blockquote> <p>引用类型有什么问题？看一个例子</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br></div><pre class="language-js"><code><span class="token comment">// function Animal ... 忽略不写</span>
<span class="token comment">// function Dog ...</span>
<span class="token keyword">var</span> wancai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> dahuan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'大黄'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wancai<span class="token punctuation">.</span>skill<span class="token punctuation">)</span> <span class="token comment">// ['running', 'eat', 'sleep']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dahuan<span class="token punctuation">.</span>skill<span class="token punctuation">)</span> <span class="token comment">// ['running', 'eat', 'sleep']</span>

wancai<span class="token punctuation">.</span>skill<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'play ball'</span><span class="token punctuation">)</span> <span class="token comment">// 为旺财添加一个技能</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wancai<span class="token punctuation">.</span>skill<span class="token punctuation">)</span> <span class="token comment">// ['running', 'eat', 'sleep','play ball']</span>
<span class="token comment">// 大黄的技能也新增了</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dahuan<span class="token punctuation">.</span>skill<span class="token punctuation">)</span> <span class="token comment">// ['running', 'eat', 'sleep','play ball']</span>

<span class="token comment">// 再来一个问题。假如大黄不会跑步，只能走路</span>
dahuan<span class="token punctuation">.</span>skill<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'walk'</span>
<span class="token comment">// wancai 的 1技能也被改成走路了？</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wancai<span class="token punctuation">.</span>skill<span class="token punctuation">)</span> <span class="token comment">// ['walk', 'eat', 'sleep','play ball']</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>出现这个问题，是因为 <code>skill</code> 是引用数据类型，内存地址是一样的
而 <code>wancai</code> 和 <code>dahuan</code> 都是从 <code>Animal</code> 继承而来，用的同一个 <code>skill</code>。所以无论是那个实例修改，都会影响另外的实例</p> <p><strong>怎么避免这个问题？使用函数返回一个新的对象，而不是用引用类型的数据</strong><br>
引用类型缺陷在 vue 上体验的是最淋漓尽致的。具体可以看 <a href="/front-end-knowledge/Vue/vue组件的data为什么必须是函数.html">vue 组件的 data 为什么必须是函数</a></p> <h4 id="_2-第二个是我们无法为不同的实例初始化继承来的属性"><a href="#_2-第二个是我们无法为不同的实例初始化继承来的属性" class="header-anchor">#</a> 2. 第二个是我们无法为不同的实例初始化继承来的属性</h4> <p>在上面例子的 <code>Animal</code>中，我们可以接收一个 color 类型(标识动物的颜色)。
可是我们 new 出来所有的 dog 对象，都只能是<code>white</code>。<strong>并不能为旺财指定黑色的毛，而大黄执行黄色的毛</strong></p> <h2 id="构造函数继承"><a href="#构造函数继承" class="header-anchor">#</a> 构造函数继承</h2> <p>构造函数继承方式可以避免类式继承的缺陷：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color
  <span class="token keyword">this</span><span class="token punctuation">.</span>skill <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'running'</span><span class="token punctuation">,</span> <span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token string">'sleep'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>home <span class="token operator">=</span> <span class="token string">'宠物店'</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">skill_1</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' is '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>skill<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> wancai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> dahuan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'大黄'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span>

wancai<span class="token punctuation">.</span>skill<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'play ball'</span><span class="token punctuation">)</span>
dahuan<span class="token punctuation">.</span>skill<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'walk'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wancai<span class="token punctuation">.</span>skill<span class="token punctuation">)</span> <span class="token comment">// ['running', 'eat', 'sleep','play ball']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dahuan<span class="token punctuation">.</span>skill<span class="token punctuation">)</span> <span class="token comment">//['walk', 'eat', 'sleep']</span>

wancai<span class="token punctuation">.</span>home <span class="token comment">// undefined</span>
dahuan<span class="token punctuation">.</span>home <span class="token comment">// undefined</span>

wancai<span class="token punctuation">.</span><span class="token function">skill_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Uncaught TypeError: dahuan.skill is not a function</span>
dahuan<span class="token punctuation">.</span><span class="token function">skill_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Uncaught TypeError: dahuan.skill is not a function</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="在-dog-中的-animal-call作用是什么？"><a href="#在-dog-中的-animal-call作用是什么？" class="header-anchor">#</a> 在 <code>Dog</code> 中的 <code>Animal.call</code>作用是什么？</h3> <ol><li>call 用于改变 this 指向的</li> <li>在 new 的过程中，实际上是把 <code>Dog</code> 函数执行了一次，在 Dog 中调用 <code>Animal</code> 的方法，然后 <code>Animal</code> 方法内部把各种对应的属性（color,skill 之类的）挂载到了 <code>this</code>中，<strong>注意现在 Animal 里面的 this 实际上是对象的实例的 this</strong>。不了解的可以看下 new 相关的介绍，在新建实例的时候，<code>Dog</code> 对象的 this 指向已经改变，然后在 <code>Dog</code> 内部在用 <code>call</code> 改变了 Animal 指向，所以属性都挂载到了对应实例的 this 对象上</li></ol> <h3 id="构造函数继承的缺点"><a href="#构造函数继承的缺点" class="header-anchor">#</a> 构造函数继承的缺点</h3> <p>前面说到 构造函数继承 就是避免了类的继承的缺点（引用类型问题，无法初始化继承来的属性）<br> <strong>但也不是完美的解决方案</strong></p> <h4 id="_1-那就是我们无法获取到父类的共有方法"><a href="#_1-那就是我们无法获取到父类的共有方法" class="header-anchor">#</a> 1. 那就是我们无法获取到父类的共有方法</h4> <p>可以看到调用 <code>skill_1</code> 是不存在的方法。获取 Animal 原型链上的 home 属性也是不存在的。所以说这不是真正意义的继承</p> <p><strong>只是通过改变 this 指向的方法，获取<code>Animal</code>中的属性，挂载到自己的 this 中。</strong></p> <h2 id="组合继承"><a href="#组合继承" class="header-anchor">#</a> 组合继承</h2> <p><strong>组合继承 = 类式继承 + 构造函数继承</strong><br>
来实现一下：</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color
  <span class="token keyword">this</span><span class="token punctuation">.</span>home <span class="token operator">=</span> <span class="token string">'宠物店'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>skill <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'running'</span><span class="token punctuation">,</span> <span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token string">'sleep'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' is running'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> wancai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> dahuan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'大黄'</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">)</span>
wancai<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 旺财 is running</span>
wancai<span class="token punctuation">.</span>color <span class="token comment">// black</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="组合继承-优缺点"><a href="#组合继承-优缺点" class="header-anchor">#</a> 组合继承 优缺点</h3> <h4 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h4> <p>集成了 <code>类式继承</code> 和 <code>构造函数继承</code>的优点。</p> <ul><li>现在原型链的方法可以找到了</li> <li>对应的属性也已经隔离 <strong>（挂载在当前实例的 this 上而不是公用 Animal 的属性）</strong></li></ul> <h4 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h4> <p><s>这么完美的方式，居然还有缺点？！</s></p> <ol><li>它调用了两次父类的构造函数。(Animal 方法被调用了 2 次)
<blockquote><p>一次绑定 this 的值，一次挂载原型链方法</p></blockquote></li></ol> <h2 id="寄生组合式继承"><a href="#寄生组合式继承" class="header-anchor">#</a> 寄生组合式继承</h2> <p>寄生组合式继承强化的部分就是在<code>组合继承</code>的基础上<code>减少一次</code>多余的调用父类的构造函数<br>
怎么减少？回想<code>类式继承</code>中的一个 <a href="#%E4%B8%BA%E4%BB%80%E4%B9%88-b-prototype-new-a-%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF%EF%BC%9F">原型链分析</a><br>
可以发现 <code>B.prototype = new A()</code> 这个步骤无非就是想达到：<code>B.prototype.__proto__ === A.prototype</code>。<code>__proto__</code> 也不是我们想创建就创建的，所以我们需要用到 <code>Object.create()</code> 可以看下 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noopener noreferrer">Object.create()的定义<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>来写一个实现的栗子</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color
  <span class="token keyword">this</span><span class="token punctuation">.</span>home <span class="token operator">=</span> <span class="token string">'宠物店'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>skill <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'running'</span><span class="token punctuation">,</span> <span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token string">'sleep'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' is running'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Dog

<span class="token keyword">var</span> wancai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> dahuan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'大黄'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span>

<span class="token comment">// 示范栗子就不写了，自己打印看下，都是一样的道理了</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="为什么要-dog-prototype-constructor-dog？"><a href="#为什么要-dog-prototype-constructor-dog？" class="header-anchor">#</a> 为什么要 <code>Dog.prototype.constructor = Dog</code>？</h3> <p><strong>这是前面一直都存在可是没有讲的问题！其实每次赋值都是必须进行这步的操作</strong></p> <p>观察这 2 段代码：<strong>原型上的构造函数应该是等于自身的函数的</strong>，很明显 Dog 的构造函数被改写了！那这会造成什么问题？</p> <ul><li>构造函数观察</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Animal<span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Dog<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在这个 demo 中，并不会造成什么大的问题。但他存在一个隐患：<br>
虽然现在用不上 <code>constructor</code> 但并不代表这个没作用<br>
假如我们想给 Dog 方法创建一个 <code>create</code>方法，生成对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">this<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 效果等同于 new Dog()</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果一开始我们就没重置 <code>constructor</code> 状态，上面的 create 方法就会有问题，尤其是大型项目中，很多时候设计了功能我们得把一些<code>小尾巴收掉</code>，不然别人来使用这个方法的时候，很有可能就会莫名掉进某一个坑中，这就不好了</p> <h2 id="extends-继承"><a href="#extends-继承" class="header-anchor">#</a> extends 继承</h2> <p>class 和 extends 是 es6 新增的。class 创建一个类，extends 来实现继承。来一段 demo 熟悉下</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color
    <span class="token keyword">this</span><span class="token punctuation">.</span>skill <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'running'</span><span class="token punctuation">,</span> <span class="token string">'eat'</span><span class="token punctuation">,</span> <span class="token string">'sleep'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' is '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>skill<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> wancai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> dahuan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'大黄'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong><code>super</code> 在继承中是必须调用的。通过 super 调用 Animal 的 constructor 方法，实现初始化的</strong></p> <div class="custom-block danger"><p class="custom-block-title">super 方法</p> <p>子类必须在 constructor 方法中调用 super 方法，否则新建实例时会报错。这是因为子类没有自己的 this 对象，而是继承父类的 this 对象，然后对其进行加工。如果不调用 super 方法，子类就得不到 this 对象。</p></div> <blockquote><p>感兴趣的还可以把 class 的 demo 复制到 ES6 转 ES5 的网页中，转换一下，看下 class 是如何工作的 <a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">babeljs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。其中可以看到很多私有方法，都是要用到 <code>constructor</code>。所以如果我们自己写继承的时候，一定要注意这个问题</p></blockquote> <h2 id="最后总结一下"><a href="#最后总结一下" class="header-anchor">#</a> 最后总结一下</h2> <ol><li><p>类式继承</p> <ul><li>第一个是引用类型的缺陷</li> <li>我们无法为不同的实例初始化继承来的属性</li></ul></li> <li><p>构造函数继承</p> <ul><li>那就是我们无法获取到父类的共有方法</li></ul></li> <li><p>组合继承</p> <ul><li>结合了 <code>类式继承</code> 和 <code>构造函数继承</code> 的功能</li> <li>但是它调用了两次父类的构造函数</li></ul></li> <li><p>寄生组合式继承</p> <ul><li>结合了上面 3 个的优点，并且排除了他们的缺点</li></ul></li> <li><p>es6 的 class 语法和 extends</p> <ul><li>es6 的语法才能用，低版本浏览器还得做兼容处理/es6 转 es5</li></ul></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/27/2020, 3:20:35 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front-end-knowledge/JavaScript/箭头函数的特点.html" class="prev">
        箭头函数
      </a></span> <span class="next"><a href="/front-end-knowledge/JavaScript/说出==和===区别.html">
        说出 == 和 ===区别，什么情况用 ==
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:0px;bottom:200px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div><div></div></div></div>
    <script src="/front-end-knowledge/assets/js/app.8a3ea995.js" defer></script><script src="/front-end-knowledge/assets/js/2.73099b0e.js" defer></script><script src="/front-end-knowledge/assets/js/29.0ed6d585.js" defer></script>
  </body>
</html>
